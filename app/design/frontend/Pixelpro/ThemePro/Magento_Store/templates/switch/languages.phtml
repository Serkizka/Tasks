<?php
/**
 * Copyright Â© 2016 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */

// @codingStandardsIgnoreFile

?>
<?php
/**
 * Language switcher template
 */
?>

<?php if(count($this->getStores())>1): ?>

<div class="language__wrapper" id="langs-wrapper">
    <div class="language__box" onclick="clickButton()">
        <?php foreach ($this->getStores() as $_lang): ?>

        <!-- flag image-->
        <?php if ($_lang->getId() == $block->getCurrentStoreId()) : ?>
        <button
            class="language__flag"><img class="language__image"
            src="<?php echo $this->getViewFileUrl('images/flags/flag_' . $_lang->getCode() . '.png');?>"
            alt="<?php echo 'could not find image for ' . $_lang->getName() ?>"/></button>
        <?php endif;?>
        <!-- flag -->

        <!-- Title -->
        <?php if ($_lang->getId() == $block->getCurrentStoreId()) : ?>
        <li class="language__item">
            <button
                class="language__link">
                <?= $block->escapeHtml($_lang->getName()) ?>
            </button>
        </li>
        <?php endif; ?>
        <!-- Title -->

        <?php endforeach;?>
    </div>
</div>



<!-- popup -->
<div class="modal" id="myModal" >
<div class="language-popup" id="language-popup">

    <?php foreach ($this->getStores() as $_lang): ?>
    <?php $_selected = ($_lang->getId() == $this->getCurrentStoreId()) ? ' selected="selected"' : '' ?>
    <option
        id="language-popup__box"
        value="<?php echo $_lang->getCurrentUrl() ?>"
        <?php echo $_selected ?>><?php echo $this->escapeHtml($_lang->getName()) ?></option>
    <?php if ($_lang->getCode() != 'default'): ?>

    <a
        class="language-popup__link"
        href="<?php echo $this->getCurrentUrl() . '?___store=' . $_lang->getCode();?>"><img
        src="<?php echo $this->getViewFileUrl('images/flags/flag_' . $_lang->getCode() . '.png');?>"
        alt="<?php echo 'could not find image for ' . $_lang->getName() ?>"/></a>

    <?php endif;?>
    <?php endforeach;?>
</div>
    </div>
<!-- popup -->

<?php endif;?>